{% load diccionario %}
{% load tz %}
{% load static %}

{% block content %}
<div class="container mt-4">
    <h2 class="mb-4 text-center">Turnos de {{ departamento }} - {{ grupo }}</h2>

    <div class="table-responsive">
        <table class="table table-hover table-striped text-center" style="border:3px solid #000; border-collapse:collapse; table-layout: fixed; width: 100%;">
            <thead style="background-color:#343a40; color:white;">
                <tr>
                    <th style="border:3px solid #000; width:150px;">Empleado</th>
                    {% for fecha in fechas_mes %}
                        <th style="border:3px solid #000; width:50px; white-space: normal;">
                            {% with fecha|date:"w" as dia_semana %}
                                {% if dia_semana == "0" %}Dom{% elif dia_semana == "1" %}Lun{% elif dia_semana == "2" %}Mar{% elif dia_semana == "3" %}Mié{% elif dia_semana == "4" %}Jue{% elif dia_semana == "5" %}Vie{% else %}Sáb{% endif %}
                            {% endwith %}<br>{{ fecha.day }}
                        </th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for emp in empleados %}
                    <tr>
                        <td class="text-start fw-bold" style="border:3px solid #000;">{{ emp.nombre }}</td>
                        {% with turnos_empleados|get_item:emp.id as emp_turnos %}
                            {% for fecha in fechas_mes %}
                                {% if emp_turnos|get_item:fecha %}
                                    <td style="border:3px solid #000; background-color:#d4edda; height:40px; width:50px;">
                                        {{ emp_turnos|get_item:fecha }}
                                    </td>
                                {% else %}
                                    <td style="border:3px solid #000; background-color:#f8f9fa; height:40px; width:50px;">-</td>
                                {% endif %}
                            {% endfor %}
                        {% endwith %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Botones de grupos debajo de la tabla con estilo de badges -->
    <div class="mt-3 text-center">
        <a href="{% url 'empleados_por_departamento_y_grupo' departamento 'Grupo 1' %}" class="btn btn-danger me-2 grupo-badge">Grupo 1</a>
        <a href="{% url 'empleados_por_departamento_y_grupo' departamento 'Grupo 2' %}" class="btn btn-primary me-2 grupo-badge">Grupo 2</a>
        <a href="{% url 'empleados_por_departamento_y_grupo' departamento 'Grupo 3' %}" class="btn btn-warning text-dark grupo-badge">Grupo 3</a>
    </div>

    <div class="mt-3 text-center">
        <a href="{% url 'lista_turnos' %}" class="btn btn-secondary">← Volver</a>
    </div>
</div>

<style>
    /* Estilo de badges de la primera plantilla */
    .grupo-badge {
        padding: 8px 16px;
        border-radius: 8px;
        color: white;
        font-weight: bold;
        display: inline-block;
        min-width: 100px;
        text-align: center;
        font-size: 14px;
    }
</style>
{% endblock %}
